# Flags

When we talk about flags in assembly, we are refering to a register that contain a variety of bits representing state and status information. This register varies in size, but many portions (in newer processors) aren't used. 

| FLAGS | 16 bits |
| EFLAGS | 32 bits |
| RFLAGS | 64 bits |

![](/imgs/eflags.pnf)

---

## Flags we Care About Now

### Zero Flag (ZF)

* set when an operation that sets the zero flag produces a zero- includes arithmetic and bitshift operations

### Carry Flag (CF)

* Set when an arithmetic borrow or carry occurs during add/sub - e.g. the result of an add would have set bit 33 (in x86), or bit 65 (in x86_64)
    * Also set with some bitshift operations (such as when a bit falls of the end in a shr/shl)

### Overflow Flag (OF)

* Indicates that sign bit of the result of an operation is different than the sign bits of the operands
    * Ex: Adding two large positive numbers ends up producing a negative result (due to overflow)

### Sign Flag (SF)

* Set to indicate the result of an operation is negative

## Accessing the Flags

* Can be set and checked manually
    * Some have special instructions for set and clear (which we'll talk about later)
    * Flag register can be accessed and set via pushf(d|q)/popf(d|q)

## pushf and popf

* **Description**
    * Pushes the flag register (or the first 16 bits... eflags(32 bits) or rflags(64 bits) if pushfd or pushfq) onto the stack, and pops the value on top of the stack into the flags register (or eflags/rflags)
* **Basic Use**

```nasm
pushf       ; flags have been pushed to the stack
; ... do stuff
popf        ; flags have been restored
```

# Lab 6

* Proceed to lab6 and follow the instructions