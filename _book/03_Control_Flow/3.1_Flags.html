
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Flags Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="3.2_Control_Flow.html" />
    
    
    <link rel="prev" href="./" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    IQT Assembly
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../01_Introduction/">
            
                <a href="../01_Introduction/">
            
                    
                    Assembly Introduction
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../01_Introduction/01.1_Computer_Basics.html">
            
                <a href="../01_Introduction/01.1_Computer_Basics.html">
            
                    
                    Computer Basics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../01_Introduction/01.2_Asm_Basics.html">
            
                <a href="../01_Introduction/01.2_Asm_Basics.html">
            
                    
                    ASM Basics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../01_Introduction/01.3_Debugging_ASM_pt1.html">
            
                <a href="../01_Introduction/01.3_Debugging_ASM_pt1.html">
            
                    
                    Debugging ASM Part 1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../01_Introduction/01.4_DataTypesANDDebugging_pt2.html">
            
                <a href="../01_Introduction/01.4_DataTypesANDDebugging_pt2.html">
            
                    
                    Data Types and Debugging Part 2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../01_Introduction/01.5_Adv_Types.html">
            
                <a href="../01_Introduction/01.5_Adv_Types.html">
            
                    
                    Advanced Types and Concepts
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../02_Basic_Operations/">
            
                <a href="../02_Basic_Operations/">
            
                    
                    Basic Operations
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../02_Basic_Operations/02.1_Arithmetic_Instructions.html">
            
                <a href="../02_Basic_Operations/02.1_Arithmetic_Instructions.html">
            
                    
                    Arithmetic Instructions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../02_Basic_Operations/02.2_The_Stack.html">
            
                <a href="../02_Basic_Operations/02.2_The_Stack.html">
            
                    
                    The Stack
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../02_Basic_Operations/02.3_negative_bitwise.html">
            
                <a href="../02_Basic_Operations/02.3_negative_bitwise.html">
            
                    
                    Negative Numbers Bitwise
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="./">
            
                <a href="./">
            
                    
                    Control Flow
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.4.1" data-path="3.1_Flags.html">
            
                <a href="3.1_Flags.html">
            
                    
                    Flags
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="3.2_Control_Flow.html">
            
                <a href="3.2_Control_Flow.html">
            
                    
                    Control Flow
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Flags</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="flags">Flags</h1>
<p>When we talk about flags in assembly, we are refering to a register that contain a variety of bits representing state and status information. This register varies in size, but many portions (in newer processors) aren&apos;t used. </p>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>FLAG</strong></th>
<th style="text-align:left"><strong>Size</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">FLAGS</td>
<td style="text-align:left">16 bits</td>
</tr>
<tr>
<td style="text-align:left">EFLAGS</td>
<td style="text-align:left">32 bits</td>
</tr>
<tr>
<td style="text-align:left">RFLAGS</td>
<td style="text-align:left">64 bits</td>
</tr>
</tbody>
</table>
<p><img src="../imgs/eflags.pnf" alt=""></p>
<hr>
<h2 id="flags-we-care-about-now">Flags we Care About Now</h2>
<h3 id="zero-flag-zf">Zero Flag (ZF)</h3>
<ul>
<li>Set when an operation that sets the zero flag produces a zero- includes arithmetic and bitshift operations</li>
<li>In otherwise, this flag gets set if an arthmetic result is zero</li>
</ul>
<h3 id="carry-flag-cf">Carry Flag (CF)</h3>
<ul>
<li>Set when an arithmetic borrow or carry occurs during add/sub - e.g. the result of an add would have set bit 33 (in x86), or bit 65 (in x86_64)<ul>
<li>Also set with some bitshift operations (such as when a bit falls of the end in a shr/shl)</li>
<li>This deals with <strong>unsigned</strong> numbers</li>
<li>Can happen when two unsigned numbers were added and the result is larger than the &quot;capacity&quot; of register where it is saved<ul>
<li>Ex: We add two 8 bit numbers and the saved result is larger than the 8 bit register we store it in</li>
</ul>
</li>
<li>Also set when two unsigned numbers were subtracted and we subtract the larger one from the smaller one</li>
</ul>
</li>
</ul>
<h3 id="overflow-flag-of">Overflow Flag (OF)</h3>
<ul>
<li>Indicates that sign bit of the result of an operation is different than the sign bits of the operands<ul>
<li>Ex: Adding two large positive numbers ends up producing a negative result (due to overflow)</li>
<li>Ex: If we subtract two numbers that are smaller than register size (-129 for 8bit)</li>
<li>This applies to <strong>signed numbers</strong></li>
</ul>
</li>
</ul>
<h3 id="sign-flag-sf">Sign Flag (SF)</h3>
<ul>
<li>Set to indicate the result of an operation is negative</li>
</ul>
<h2 id="accessing-the-flags">Accessing the Flags</h2>
<ul>
<li>Can be set and checked manually<ul>
<li>Some have special instructions for set and clear (which we&apos;ll talk about later)</li>
<li>Flag register can be accessed and set manually via pushf(d|q)/popf(d|q)</li>
<li>Refer to below (pushf popf)</li>
</ul>
</li>
</ul>
<h2 id="pushf-and-popf">pushf and popf</h2>
<ul>
<li><p><strong>Description</strong></p>
<ul>
<li>Pushes the flag register (or the first 16 bits... eflags(32 bits) or rflags(64 bits) if pushfd or pushfq) onto the stack, and pops the value on top of the stack into the flags register (or eflags/rflags)</li>
<li>Higher 32 bits in rflags are reserved<ul>
<li>Thus we can just handle rflags as eflags, doesn&apos;t make a difference</li>
</ul>
</li>
<li>In reality, the flags we will be accessing are within the first 16 bits</li>
</ul>
</li>
<li><p><strong>Basic Use</strong></p>
</li>
</ul>
<pre><code class="lang-nasm">pushf       ; flags have been pushed to the stack
; ... do stuff
popf        ; flags have been restored
</code></pre>
<ul>
<li><p><strong>How does this really work?</strong></p>
<ul>
<li>First you specify how much of the flags you want to push onto the stack (pushf)</li>
<li>From there, you can pop those back off into a register (pop reg, rax for example)</li>
<li>From there you can modify the value in that register</li>
<li>From there you can push that register back onto the stack (pushf)</li>
<li>Finally you can pop the flag off, taking the new value with it. (popf)</li>
</ul>
</li>
</ul>
<h1 id="lab-6">Lab 6</h1>
<ul>
<li>Proceed to lab6 and follow the instructions</li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="./" class="navigation navigation-prev " aria-label="Previous page: Control Flow">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="3.2_Control_Flow.html" class="navigation navigation-next " aria-label="Next page: Control Flow">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Flags","level":"1.4.1","depth":2,"next":{"title":"Control Flow","level":"1.4.2","depth":2,"path":"03_Control_Flow/3.2_Control_Flow.md","ref":"03_Control_Flow/3.2_Control_Flow.md","articles":[]},"previous":{"title":"Control Flow","level":"1.4","depth":1,"path":"03_Control_Flow/README.md","ref":"03_Control_Flow/README.md","articles":[{"title":"Flags","level":"1.4.1","depth":2,"path":"03_Control_Flow/3.1_Flags.md","ref":"03_Control_Flow/3.1_Flags.md","articles":[]},{"title":"Control Flow","level":"1.4.2","depth":2,"path":"03_Control_Flow/3.2_Control_Flow.md","ref":"03_Control_Flow/3.2_Control_Flow.md","articles":[]}]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["livereload"],"pluginsConfig":{"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"03_Control_Flow/3.1_Flags.md","mtime":"2018-08-02T18:30:18.139Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-08-02T18:47:25.761Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

